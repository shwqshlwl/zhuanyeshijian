# 实验功能测试指南

## 🧪 测试准备

### 1. 启动项目
```bash
# 启动后端
cd sj
mvn spring-boot:run

# 启动前端
cd frontend
npm run dev
```

### 2. 准备测试账号
- **教师账号**: 用于创建和管理实验
- **学生账号**: 用于参与实验和提交代码

---

## 📝 测试用例

### 测试1: 创建实验（教师）

**步骤**:
1. 使用教师账号登录
2. 进入"实验管理"页面
3. 点击"创建实验"按钮
4. 填写以下信息：
   - 实验名称: `两数相加`
   - 所属课程: 选择任意课程
   - 编程语言: `Java`
   - 截止时间: 选择未来时间
   - 总分: `100`
   - 时间限制: `5000` ms
   - 内存限制: `256` MB
   - 实验描述: `编写程序，读取两个整数，输出它们的和`
   - 实验要求: `从标准输入读取两个整数a和b，输出a+b的结果`

5. 点击"插入模板"按钮，插入Java模板代码

6. 添加测试用例：
   
   **测试用例1**:
   - 输入: `1 2`
   - 期望输出: `3`
   
   **测试用例2**:
   - 输入: `10 20`
   - 期望输出: `30`
   
   **测试用例3**:
   - 输入: `-5 5`
   - 期望输出: `0`

7. 点击"创建实验"按钮

**预期结果**: 
- ✅ 创建成功提示
- ✅ 自动跳转到实验列表
- ✅ 列表中显示新创建的实验

---

### 测试2: 学生答题

**步骤**:
1. 使用学生账号登录
2. 进入"我的实验"页面
3. 找到"两数相加"实验
4. 点击"开始答题"按钮
5. 查看左侧实验要求
6. 在右侧代码编辑器中编写代码：

```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int a = scanner.nextInt();
        int b = scanner.nextInt();
        System.out.println(a + b);
        scanner.close();
    }
}
```

7. 点击"运行测试"按钮

**预期结果**:
- ✅ 显示运行结果
- ✅ 如果代码正确，显示"运行成功"

---

### 测试3: 代码执行页面

**步骤**:
1. 在答题页面编写代码后
2. 点击"执行页面"按钮
3. 查看执行状态和日志
4. 点击"开始执行"按钮
5. 观察执行过程

**预期结果**:
- ✅ 显示执行日志
- ✅ 显示进度条
- ✅ 显示执行结果
- ✅ 显示代码预览

---

### 测试4: 提交代码

**步骤**:
1. 在答题页面确认代码无误
2. 点击"提交代码"按钮
3. 确认提交
4. 等待自动跳转

**预期结果**:
- ✅ 提交成功提示
- ✅ 自动跳转到评测结果页
- ✅ 显示"评测中"状态
- ✅ 2秒后自动刷新显示评测结果

---

### 测试5: 查看评测结果

**步骤**:
1. 在评测结果页面查看：
   - 评测状态（通过/未通过）
   - 得分
   - 通过用例数
   - 执行时间
   - 内存使用
2. 展开测试用例详情
3. 查看提交的代码
4. 点击"复制代码"按钮

**预期结果**:
- ✅ 显示完整的评测信息
- ✅ 测试用例详情可展开/折叠
- ✅ 代码可以复制
- ✅ 通过的用例显示绿色边框
- ✅ 未通过的用例显示红色边框

---

### 测试6: 提交历史

**步骤**:
1. 返回答题页面
2. 查看左侧"我的提交历史"
3. 点击某个历史记录的"加载代码"按钮

**预期结果**:
- ✅ 显示所有提交记录
- ✅ 显示每次提交的状态和得分
- ✅ 可以加载历史代码到编辑器

---

### 测试7: 草稿保存

**步骤**:
1. 在答题页面编写代码
2. 点击"保存草稿"按钮
3. 刷新页面或关闭浏览器
4. 重新进入答题页面

**预期结果**:
- ✅ 保存成功提示
- ✅ 重新进入时提示加载草稿
- ✅ 代码被恢复

---

### 测试8: 教师查看提交（教师）

**步骤**:
1. 使用教师账号登录
2. 进入实验详情页
3. 查看"学生提交列表"
4. 点击某个学生的"查看代码"按钮

**预期结果**:
- ✅ 显示所有学生的提交情况
- ✅ 显示学号、姓名、提交时间、状态、得分
- ✅ 可以查看学生的代码

---

### 测试9: 编辑实验（教师）

**步骤**:
1. 使用教师账号登录
2. 进入实验列表
3. 点击某个实验的"编辑"按钮
4. 修改实验信息
5. 添加或删除测试用例
6. 点击"保存修改"按钮

**预期结果**:
- ✅ 表单自动填充原有数据
- ✅ 测试用例正确显示
- ✅ 修改成功提示
- ✅ 返回列表页

---

### 测试10: 多语言支持

**步骤**:
1. 创建Python实验
2. 学生使用Python编写代码：

```python
a, b = map(int, input().split())
print(a + b)
```

3. 运行和提交

**预期结果**:
- ✅ Python代码正确执行
- ✅ 评测结果正确

---

## 🐛 常见问题排查

### 问题1: 代码执行失败
**可能原因**:
- 编译器未安装（C/C++需要gcc/g++）
- 代码语法错误
- 超时或内存超限

**解决方法**:
- 检查错误信息
- 修改代码
- 调整时间/内存限制

### 问题2: 评测一直显示"评测中"
**可能原因**:
- 后端评测服务异常
- 代码执行超时

**解决方法**:
- 查看后端日志
- 检查代码是否有死循环
- 刷新页面重新查看

### 问题3: 测试用例不通过
**可能原因**:
- 输出格式不匹配
- 逻辑错误
- 测试用例设置错误

**解决方法**:
- 查看测试用例详情
- 对比期望输出和实际输出
- 检查空格、换行等格式问题

---

## 📊 测试检查清单

### 功能测试
- [ ] 创建实验
- [ ] 编辑实验
- [ ] 删除实验
- [ ] 学生答题
- [ ] 运行测试
- [ ] 代码执行页面
- [ ] 提交代码
- [ ] 查看评测结果
- [ ] 提交历史
- [ ] 草稿保存
- [ ] 教师查看提交

### 语言测试
- [ ] Java
- [ ] Python
- [ ] C++
- [ ] C
- [ ] JavaScript

### UI测试
- [ ] 代码编辑器行号显示
- [ ] Tab键缩进
- [ ] 全屏模式
- [ ] 响应式布局
- [ ] 状态颜色区分
- [ ] 动画效果

### 边界测试
- [ ] 空代码提交
- [ ] 超长代码
- [ ] 特殊字符
- [ ] 大量测试用例
- [ ] 超时代码
- [ ] 内存溢出代码

---

## 🎯 性能测试

### 测试场景1: 并发提交
- 10个学生同时提交代码
- 观察系统响应时间

### 测试场景2: 大代码量
- 提交1000行以上的代码
- 观察执行和评测时间

### 测试场景3: 多测试用例
- 创建包含20个测试用例的实验
- 观察评测完成时间

---

## 📈 测试报告模板

```
测试日期: ____________________
测试人员: ____________________

功能测试结果:
✅ 通过: ____ 项
❌ 失败: ____ 项
⚠️  部分通过: ____ 项

发现的问题:
1. ________________________________
2. ________________________________
3. ________________________________

改进建议:
1. ________________________________
2. ________________________________
3. ________________________________

总体评价:
________________________________
________________________________
```

---

## 🚀 快速测试脚本

### 测试数据准备

**Java测试代码**:
```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int a = scanner.nextInt();
        int b = scanner.nextInt();
        System.out.println(a + b);
        scanner.close();
    }
}
```

**Python测试代码**:
```python
a, b = map(int, input().split())
print(a + b)
```

**C++测试代码**:
```cpp
#include <iostream>
using namespace std;

int main() {
    int a, b;
    cin >> a >> b;
    cout << a + b << endl;
    return 0;
}
```

**测试用例数据**:
```json
[
  {"input": "1 2", "output": "3"},
  {"input": "10 20", "output": "30"},
  {"input": "-5 5", "output": "0"},
  {"input": "100 200", "output": "300"}
]
```

---

## ✅ 验收标准

### 必须通过的测试
1. ✅ 教师可以创建实验
2. ✅ 学生可以查看实验
3. ✅ 学生可以编写和运行代码
4. ✅ 学生可以提交代码
5. ✅ 系统可以自动评测
6. ✅ 显示评测结果
7. ✅ 教师可以查看学生提交

### 推荐通过的测试
1. ✅ 支持多种编程语言
2. ✅ 草稿自动保存
3. ✅ 提交历史查看
4. ✅ 代码执行可视化
5. ✅ 友好的错误提示

---

## 📞 问题反馈

如果在测试过程中发现问题，请记录：
1. 问题描述
2. 复现步骤
3. 预期结果
4. 实际结果
5. 截图或日志

祝测试顺利！🎉
